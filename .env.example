# ============================================
# ET:LEGACY DISCORD BOT - COMPLETE CONFIGURATION
# ============================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# ============================================
# REQUIRED - Discord Bot Configuration
# ============================================

# Your Discord bot token from https://discord.com/developers/applications
# NEVER share this token or commit it to git!
DISCORD_BOT_TOKEN=YOUR_DISCORD_BOT_TOKEN_HERE

# ============================================
# REQUIRED - PostgreSQL Database Configuration
# ============================================

# PostgreSQL connection settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=etlegacy
POSTGRES_USER=etlegacy_user
POSTGRES_PASSWORD=your_secure_password_here

# Optional: Connection pool settings (default values shown)
# POSTGRES_MIN_POOL=10
# POSTGRES_MAX_POOL=30

# ============================================
# REQUIRED - Discord Channel IDs
# ============================================
# To get channel IDs:
# 1. Enable Developer Mode: Discord → Settings → Advanced → Developer Mode
# 2. Right-click channel → Copy ID
# 3. Paste the numeric ID below

# Voice channels to monitor for session detection (comma-separated)
# Example: GAMING_VOICE_CHANNELS=123456789012345678,987654321098765432
GAMING_VOICE_CHANNELS=

# Text channels where bot commands will work (comma-separated)
# Example: BOT_COMMAND_CHANNELS=123456789012345678,987654321098765432
BOT_COMMAND_CHANNELS=

# Channel where bot posts match summaries
STATS_CHANNEL_ID=

# Channel where bot posts admin alerts and errors
ADMIN_CHANNEL_ID=

# ============================================
# OPTIONAL - Automation Settings
# ============================================

# Enable automatic stats file processing
# Set to 'true' to enable, 'false' to disable
AUTOMATION_ENABLED=true

# SSH Monitoring Configuration (Optional - for auto-download from VPS)
SSH_ENABLED=false
SSH_HOST=your.vps.server
SSH_PORT=22
SSH_USER=et
SSH_KEY_PATH=~/.ssh/etlegacy_bot
REMOTE_STATS_PATH=/home/et/.etlegacy/legacy/gamestats
SSH_CHECK_INTERVAL=60
SSH_STARTUP_LOOKBACK_HOURS=24
SSH_VOICE_CONDITIONAL=true
SSH_GRACE_PERIOD_MINUTES=10

# SSH Monitor Logging Level
# QUIET: Only errors and critical events (file processing, match posts)
# NORMAL: Important events + downloads, SSH checks (default)
# VERBOSE: Everything including skipped checks
SSH_LOG_LEVEL=NORMAL

# Voice Channel Monitoring (for voice-conditional SSH checks)
GAMING_VOICE_CHANNELS=

# Discord Channel IDs
STATS_CHANNEL_ID=0
ADMIN_CHANNEL_ID=0

# Metrics Configuration
METRICS_DB_PATH=bot/data/metrics.db

# Optional Settings
LOG_LEVEL=INFO

# ============================================
# OPTIONAL - SSH Monitoring (for auto-download from game server)
# ============================================

# Enable SSH monitoring to auto-download stats files from game server
# Set to 'false' if you're manually copying files
SSH_ENABLED=false

# Game server SSH connection details
SSH_HOST=your.gameserver.com
SSH_PORT=22
SSH_USER=etlegacy

# Path to your SSH private key
# Linux/Mac: /home/youruser/.ssh/etlegacy_bot
# Windows: C:/Users/YourName/.ssh/etlegacy_bot
SSH_KEY_PATH=

# Path to stats directory on game server
# Usually: /home/et/.etlegacy/legacy/gamestats
REMOTE_STATS_PATH=/home/et/.etlegacy/legacy/gamestats

# How often to check for new files (in seconds)
SSH_CHECK_INTERVAL=60

# On bot startup, only process files from last X hours
# Prevents re-processing thousands of old files
SSH_STARTUP_LOOKBACK_HOURS=24

# SSH Monitor Logging Level
# QUIET: Only errors and critical events (file processing, match posts)
# NORMAL: Important events + downloads, SSH checks (default)
# VERBOSE: Everything including skipped checks
# SSH_LOG_LEVEL=NORMAL

# ============================================
# OPTIONAL - File Paths
# ============================================

# Local directory where downloaded stats files are stored
# Bot will create this directory if it doesn't exist
# Use relative path (./local_stats) or absolute path
LOCAL_STATS_PATH=./local_stats

# Directory for processed/backup files
# BACKUP_DIRECTORY=./processed_stats

# SQLite database for metrics (not main stats)
METRICS_DB_PATH=bot/data/metrics.db

# ============================================
# OPTIONAL - Session Detection
# ============================================

# Number of players needed in voice channels to start a session
SESSION_START_THRESHOLD=6

# Minimum players before session ends
SESSION_END_THRESHOLD=2

# Wait time before ending session (in seconds)
# Allows for bathroom breaks without ending session
SESSION_END_DELAY=300

# ============================================
# OPTIONAL - Server Control (Advanced)
# ============================================
# These settings enable server control commands (!server_start, !map_change, etc.)
# Requires additional setup on game server

# Enable RCON (remote console) commands
RCON_ENABLED=false

# RCON connection (usually same as SSH_HOST)
RCON_HOST=localhost
RCON_PORT=27960
RCON_PASSWORD=

# ============================================
# OPTIONAL - Advanced Settings
# ============================================

# Database type: 'postgresql' (recommended) or 'sqlite' (dev only)
# DATABASE_TYPE=postgresql

# SQLite database path (only used if DATABASE_TYPE=sqlite)
# SQLITE_DB_PATH=bot/etlegacy_production.db

# Stats directory for manual parsing
# STATS_DIRECTORY=local_stats

# Discord guild ID (usually auto-detected)
# DISCORD_GUILD_ID=

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# ✅ 1. Copy this file: cp .env.example .env
# ✅ 2. Fill in DISCORD_BOT_TOKEN (from Discord Developer Portal)
# ✅ 3. Fill in POSTGRES_* settings (after creating database)
# ✅ 4. Fill in *_CHANNEL_ID settings (right-click channels in Discord)
# ✅ 5. (Optional) Fill in SSH_* settings for auto-monitoring
# ✅ 6. Save file and start bot: python bot/ultimate_bot.py
#
# For detailed setup instructions, see README_PRODUCTION_READY.md
# ============================================
