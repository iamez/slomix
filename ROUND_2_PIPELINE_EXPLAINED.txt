================================================================================
ğŸ”„ ROUND 2, 3, 4... PIPELINE - WHAT'S DIFFERENT?
================================================================================

The pipeline is THE SAME, but with one CRITICAL difference:

ğŸ¯ GAMING SESSION ID CALCULATION


================================================================================
ğŸ“Š ROUND 1 vs ROUND 2+ COMPARISON
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROUND 1 (First Round of the Night)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Stage 5: Calculate gaming_session_id                                   â”‚
â”‚   â”œâ”€ Check database: "Is there a previous round?"                      â”‚
â”‚   â”œâ”€ NO â†’ This is the first round ever!                                â”‚
â”‚   â””â”€ gaming_session_id = 1                                             â”‚
â”‚                                                                         â”‚
â”‚ Saved to database:                                                     â”‚
â”‚   rounds table:                                                        â”‚
â”‚     round_id: 1                                                        â”‚
â”‚     round_date: 2025-11-06                                             â”‚
â”‚     round_time: 20:00:00                                               â”‚
â”‚     gaming_session_id: 1  â† NEW SESSION!                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          â° 15 minutes pass...
                      Players finish Round 1, start Round 2

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROUND 2 (Same Gaming Night, 15 minutes later)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Stage 5: Calculate gaming_session_id                                   â”‚
â”‚   â”œâ”€ Check database: "Is there a previous round?"                      â”‚
â”‚   â”œâ”€ YES! Round 1 exists                                               â”‚
â”‚   â”‚   â”œâ”€ Last round time: 20:00:00                                     â”‚
â”‚   â”‚   â”œâ”€ Current round time: 20:15:00                                  â”‚
â”‚   â”‚   â””â”€ Time gap: 15 minutes                                          â”‚
â”‚   â”‚                                                                     â”‚
â”‚   â”œâ”€ Is gap > 60 minutes?                                              â”‚
â”‚   â”œâ”€ NO â†’ Same gaming session!                                         â”‚
â”‚   â””â”€ gaming_session_id = 1 (REUSE from Round 1)                        â”‚
â”‚                                                                         â”‚
â”‚ Saved to database:                                                     â”‚
â”‚   rounds table:                                                        â”‚
â”‚     round_id: 2                                                        â”‚
â”‚     round_date: 2025-11-06                                             â”‚
â”‚     round_time: 20:15:00                                               â”‚
â”‚     gaming_session_id: 1  â† SAME SESSION AS ROUND 1!                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          â° 15 more minutes...
                               Round 3 starts

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROUND 3 (Still Same Gaming Night)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Stage 5: Calculate gaming_session_id                                   â”‚
â”‚   â”œâ”€ Last round time: 20:15:00                                         â”‚
â”‚   â”œâ”€ Current round time: 20:30:00                                      â”‚
â”‚   â”œâ”€ Time gap: 15 minutes                                              â”‚
â”‚   â”œâ”€ Is gap > 60 minutes? NO                                           â”‚
â”‚   â””â”€ gaming_session_id = 1 (STILL SAME SESSION!)                       â”‚
â”‚                                                                         â”‚
â”‚ Database now has:                                                      â”‚
â”‚   rounds table:                                                        â”‚
â”‚     Round 1: gaming_session_id = 1                                     â”‚
â”‚     Round 2: gaming_session_id = 1                                     â”‚
â”‚     Round 3: gaming_session_id = 1  â† All linked together!             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          â° 2 hours pass...
                    Players take a break, come back later

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROUND 10 (New Gaming Session - After Long Break)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Stage 5: Calculate gaming_session_id                                   â”‚
â”‚   â”œâ”€ Last round time: 20:30:00                                         â”‚
â”‚   â”œâ”€ Current round time: 22:45:00                                      â”‚
â”‚   â”œâ”€ Time gap: 135 minutes (2 hours 15 minutes)                        â”‚
â”‚   â”‚                                                                     â”‚
â”‚   â”œâ”€ Is gap > 60 minutes?                                              â”‚
â”‚   â”œâ”€ YES! â†’ NEW GAMING SESSION!                                        â”‚
â”‚   â””â”€ gaming_session_id = 2 (INCREMENT!)                                â”‚
â”‚                                                                         â”‚
â”‚ Database now has:                                                      â”‚
â”‚   rounds table:                                                        â”‚
â”‚     Round 1-3: gaming_session_id = 1 (first session)                   â”‚
â”‚     Round 10: gaming_session_id = 2  â† NEW SESSION STARTS!             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
ğŸ¯ THE GAMING SESSION ID LOGIC
================================================================================

Every time a new round is processed, the database manager does this:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def _get_or_create_gaming_session_id():                                â”‚
â”‚                                                                         â”‚
â”‚   1. Query database for last round:                                    â”‚
â”‚      SELECT gaming_session_id, round_date, round_time                  â”‚
â”‚      FROM rounds                                                       â”‚
â”‚      WHERE gaming_session_id IS NOT NULL                               â”‚
â”‚      ORDER BY round_date DESC, round_time DESC                         â”‚
â”‚      LIMIT 1                                                           â”‚
â”‚                                                                         â”‚
â”‚   2. If NO previous round found:                                       â”‚
â”‚      â†’ Return gaming_session_id = 1                                    â”‚
â”‚                                                                         â”‚
â”‚   3. If previous round exists:                                         â”‚
â”‚      a) Calculate time gap:                                            â”‚
â”‚         gap = current_time - last_round_time                           â”‚
â”‚                                                                         â”‚
â”‚      b) Handle midnight crossing:                                      â”‚
â”‚         (if dates differ, add 24 hours)                                â”‚
â”‚                                                                         â”‚
â”‚      c) Check gap:                                                     â”‚
â”‚         - If gap <= 60 minutes:                                        â”‚
â”‚           â†’ Return SAME gaming_session_id                              â”‚
â”‚                                                                         â”‚
â”‚         - If gap > 60 minutes:                                         â”‚
â”‚           â†’ Return gaming_session_id + 1 (NEW SESSION!)                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
ğŸ“Š EXAMPLE: A FULL GAMING NIGHT
================================================================================

Time     | Round | Map      | Gap from Last | gaming_session_id | Why?
---------|-------|----------|---------------|-------------------|------------------
20:00:00 | 1     | goldrush | N/A           | 1                 | First round
20:15:00 | 2     | supply   | 15 min        | 1                 | < 60 min gap
20:30:00 | 3     | radar    | 15 min        | 1                 | < 60 min gap
20:45:00 | 4     | battery  | 15 min        | 1                 | < 60 min gap
         |       |          |               |                   |
         |       | ğŸ• PIZZA BREAK (2 hours)                     |
         |       |          |               |                   |
22:50:00 | 5     | goldrush | 125 min       | 2                 | > 60 min! NEW!
23:05:00 | 6     | supply   | 15 min        | 2                 | < 60 min gap
23:20:00 | 7     | radar    | 15 min        | 2                 | < 60 min gap
         |       |          |               |                   |
         |       | ğŸ˜´ NEXT DAY                                  |
         |       |          |               |                   |
20:00:00 | 8     | battery  | ~1260 min     | 3                 | > 60 min! NEW!
20:15:00 | 9     | goldrush | 15 min        | 3                 | < 60 min gap


Result in database:
  Session 1: Rounds 1, 2, 3, 4 (4 rounds)
  Session 2: Rounds 5, 6, 7 (3 rounds)
  Session 3: Rounds 8, 9 (2 rounds)


================================================================================
ğŸ” WHAT THIS MEANS FOR DISCORD COMMANDS
================================================================================

When you type !last_session:

1. Bot finds most recent gaming_session_id:
   SELECT MAX(gaming_session_id) FROM rounds
   â†’ Returns: 3

2. Bot fetches all rounds with gaming_session_id = 3:
   SELECT * FROM rounds WHERE gaming_session_id = 3
   â†’ Returns: Rounds 8, 9

3. Bot shows stats for ONLY those rounds (not all rounds ever!)


================================================================================
ğŸ’¡ KEY DIFFERENCES: ROUND 1 vs ROUND 2+
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Aspect                  â”‚ Round 1          â”‚ Round 2+         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ gaming_session_id       â”‚ Always 1         â”‚ 1 or higher      â”‚
â”‚ Checks previous rounds? â”‚ No               â”‚ Yes              â”‚
â”‚ Time gap calculation?   â”‚ No               â”‚ Yes              â”‚
â”‚ Database query?         â”‚ Simple INSERT    â”‚ SELECT + INSERT  â”‚
â”‚ Processing time?        â”‚ ~2 seconds       â”‚ ~2.2 seconds     â”‚
â”‚ Everything else?        â”‚ IDENTICAL        â”‚ IDENTICAL        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
ğŸ›¡ï¸ EDGE CASES HANDLED
================================================================================

1ï¸âƒ£ MIDNIGHT CROSSING:
   Last round: 23:50:00 (Nov 5)
   This round: 00:10:00 (Nov 6)
   Gap = 20 minutes (NOT 23 hours 40 minutes!)
   â†’ Same session âœ“

2ï¸âƒ£ EXACTLY 60 MINUTES:
   Gap = 60 minutes
   â†’ Same session (only > 60 triggers new session)

3ï¸âƒ£ DATABASE REBUILD:
   All files processed in order
   Sessions calculated correctly based on file timestamps
   â†’ Historical sessions preserved âœ“

4ï¸âƒ£ OUT-OF-ORDER FILES:
   Files might be processed out of chronological order
   Sessions still calculated based on actual round times
   â†’ Correct grouping âœ“


================================================================================
ğŸ“ SUMMARY - THE 60-SECOND RULE
================================================================================

ğŸ® Round 1:  "This is new! gaming_session_id = 1"
ğŸ® Round 2:  "Last round was 15 min ago? Same session! gaming_session_id = 1"
ğŸ® Round 3:  "Last round was 15 min ago? Same session! gaming_session_id = 1"
    ...
    [Long break - pizza, sleep, whatever]
    ...
ğŸ® Round 10: "Last round was 2 hours ago? NEW SESSION! gaming_session_id = 2"
ğŸ® Round 11: "Last round was 15 min ago? Same session! gaming_session_id = 2"

The ENTIRE pipeline is the same for every round.
The ONLY difference is the gaming_session_id calculation!

Everything else (parsing, validation, database inserts, Discord posts) 
works identically for Round 1, 2, 3, 4... 999!

