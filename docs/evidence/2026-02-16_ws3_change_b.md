# Evidence: WS3-002 Timing Embed Side Markers
Date: 2026-02-12  
Workstream: WS3 (Team Display Improvements)  
Task: `WS3-002`  
Status: `in_progress`

## Goal
Render side markers in timing comparison embed player rows.

## Code Changes
File:
1. `bot/services/timing_comparison_service.py`

What changed:
1. Per-player timing lines now prefix side marker (`[AX]`, `[AL]`, `[MX]`, `[--]`).
2. Added inline side legend to player block:
   - `[AX]=Axis | [AL]=Allies | [MX]/[--]=mixed or unknown`
3. Added ambiguity count when mixed/unknown side entries are present.

## Test Coverage
File:
1. `tests/unit/test_timing_comparison_service_side_markers.py`

Assertions:
1. Embed player field includes `[AX]`, `[AL]`, `[MX]`.
2. Embed player field includes side legend text.

Validation commands:
```bash
pytest -q tests/unit/test_timing_comparison_service_side_markers.py
```

```bash
pytest -q \
  tests/unit/test_round_publisher_map_scope.py \
  tests/unit/test_round_contract.py \
  tests/unit/test_stats_parser.py \
  tests/unit/test_gametime_synthetic_round.py \
  tests/unit/test_lua_round_teams_param_packing.py \
  tests/unit/test_timing_debug_service_session_join.py \
  tests/unit/test_lua_webhook_diagnostics.py \
  tests/unit/test_greatshot_crossref.py \
  tests/unit/test_greatshot_player_stats_enrichment.py \
  tests/unit/test_timing_comparison_service_side_markers.py
```

Results:
1. Focused side-marker tests: `2 passed`
2. Combined regression batch: `42 passed`

## Remaining Gate
WS3 closeout remains blocked until WS1 live ingestion gate is passed.
