<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Complete Field Mapping Analysis - Oct 28 endekk</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1e1e1e;
            color: #e0e0e0;
            padding: 20px;
        }
        .container { max-width: 1800px; margin: 0 auto; }
        h1 { 
            color: #4fc3f7;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            color: #999;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
        }
        .card h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 16px;
        }
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #3a3a3a;
        }
        .stat-item:last-child { border-bottom: none; }
        .stat-label { color: #aaa; font-size: 13px; }
        .stat-value { color: #fff; font-weight: bold; font-size: 14px; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: #2d2d2d;
            margin-bottom: 30px;
            font-size: 13px;
        }
        th {
            background: #3a3a3a;
            color: #4fc3f7;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #4fc3f7;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #3a3a3a;
        }
        tr:hover {
            background: #353535;
        }
        
        .status-ok { color: #4caf50; font-weight: bold; }
        .status-error { color: #f44336; font-weight: bold; }
        .status-warning { color: #ff9800; font-weight: bold; }
        .status-info { color: #2196f3; font-weight: bold; }
        
        .value-match { background: #1b5e20; }
        .value-mismatch { background: #7f0000; }
        .value-missing { background: #5d4037; }
        
        .chart-container {
            background: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            height: 400px;
        }
        
        .section-header {
            background: #3a3a3a;
            color: #4fc3f7;
            padding: 15px 20px;
            margin: 30px 0 20px 0;
            border-left: 4px solid #4fc3f7;
            font-size: 18px;
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .raw-data {
            background: #252525;
            border: 1px solid #444;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
            margin-bottom: 20px;
        }
        
        .formula {
            background: #2a2a2a;
            border-left: 3px solid #4fc3f7;
            padding: 10px 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Complete Field Mapping Analysis</h1>
        <div class="subtitle">
            Player: endekk | Map: etl_adlernest | Date: Oct 28, 2025 | 
            Generated: 2025-11-02 12:55:44
        </div>

        <div class="section-header">üìä Overview</div>
        <div class="summary-cards">
            <div class="card">
                <h3>Round 1</h3>
                <div class="stat-item">
                    <span class="stat-label">Damage Given</span>
                    <span class="stat-value">1,943</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Damage Received</span>
                    <span class="stat-value">1,426</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Kills</span>
                    <span class="stat-value">6</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Deaths</span>
                    <span class="stat-value">5</span>
                </div>
            </div>
            
            <div class="card">
                <h3>Round 2 (Cumulative)</h3>
                <div class="stat-item">
                    <span class="stat-label">Damage Given</span>
                    <span class="stat-value">3,309</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Damage Received</span>
                    <span class="stat-value">2,521</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Kills</span>
                    <span class="stat-value">11</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Deaths</span>
                    <span class="stat-value">9</span>
                </div>
            </div>
            
            <div class="card">
                <h3>Round 2 (Differential)</h3>
                <div class="stat-item">
                    <span class="stat-label">Damage Given</span>
                    <span class="stat-value">1,366</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Damage Received</span>
                    <span class="stat-value">1,095</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Kills</span>
                    <span class="stat-value">5</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Deaths</span>
                    <span class="stat-value">4</span>
                </div>
            </div>
            
            <div class="card">
                <h3>Database Integrity</h3>
                <div class="stat-item">
                    <span class="stat-label">R1 Fields Matching</span>
                    <span class="stat-value status-ok">‚úì VERIFIED</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">R2 Differential</span>
                    <span class="stat-value status-ok">‚úì CALCULATED</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Fields</span>
                    <span class="stat-value">38</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Status</span>
                    <span class="stat-value status-ok">‚úì HEALTHY</span>
                </div>
            </div>
        </div>
    
        <div class="section-header">üìà Visual Comparison</div>
        <div class="chart-container">
            <canvas id="damageChart"></canvas>
        </div>
        <div class="chart-container">
            <canvas id="timeChart"></canvas>
        </div>
    
        <div class="section-header">üßÆ Differential Calculation Logic</div>
        <div class="card">
            <p style="margin-bottom: 15px; color: #aaa;">
                The parser uses <code style="background: #3a3a3a; padding: 2px 6px; border-radius: 3px;">calculate_round_2_differential()</code> 
                to isolate Round 2-only performance by subtracting Round 1 stats from Round 2 cumulative stats.
            </p>
            <div class="formula">
                R2_only_damage = R2_cumulative_damage - R1_damage<br>
                1366 = 3309 - 1943  ‚úì VERIFIED
            </div>
            <p style="margin-top: 15px; color: #aaa; font-size: 12px;">
                This ensures the database stores per-round performance, not cumulative totals.
            </p>
        </div>
    
        <div class="section-header">üìã Complete Field-by-Field Mapping</div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box value-match"></div>
                <span>Perfect Match</span>
            </div>
            <div class="legend-item">
                <div class="legend-box value-mismatch"></div>
                <span>Mismatch</span>
            </div>
            <div class="legend-item">
                <div class="legend-box value-missing"></div>
                <span>Missing/Not Stored</span>
            </div>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Field Name</th>
                    <th>R1 Raw File</th>
                    <th>R2 Raw File<br>(Cumulative)</th>
                    <th>R2-R1<br>(Calculated)</th>
                    <th>R1 Database</th>
                    <th>R2 Database<br>(Should Match Calc)</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
    
                <tr class="value-match">
                    <td><strong>bullets_fired</strong></td>
                    <td>193</td>
                    <td>343</td>
                    <td>150</td>
                    <td>193</td>
                    <td>150</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>damage_given</strong></td>
                    <td>1943</td>
                    <td>3309</td>
                    <td>1366</td>
                    <td>1943</td>
                    <td>1366</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>damage_received</strong></td>
                    <td>1426</td>
                    <td>2521</td>
                    <td>1095</td>
                    <td>1426</td>
                    <td>1095</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>death_spree</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>denied_playtime</strong></td>
                    <td>55</td>
                    <td>51</td>
                    <td>0</td>
                    <td>55</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-mismatch">
                    <td><strong>dpm</strong></td>
                    <td>0.00</td>
                    <td>0.00</td>
                    <td>0</td>
                    <td>373.65</td>
                    <td>279.73</td>
                    <td><span class="status-error">‚ùå R1:False R2:False</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>dynamites_defused</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>dynamites_planted</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>full_selfkills</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>gibs</strong></td>
                    <td>1</td>
                    <td>4</td>
                    <td>3</td>
                    <td>1</td>
                    <td>3</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-mismatch">
                    <td><strong>headshot_kills</strong></td>
                    <td>2</td>
                    <td>2</td>
                    <td>0</td>
                    <td>12</td>
                    <td>11</td>
                    <td><span class="status-error">‚ùå R1:False R2:False</span></td>
                </tr>
        
                <tr class="value-mismatch">
                    <td><strong>kd_ratio</strong></td>
                    <td>1.20</td>
                    <td>1.20</td>
                    <td>0</td>
                    <td>1.20</td>
                    <td>1.25</td>
                    <td><span class="status-error">‚ùå R1:True R2:False</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>kill_assists</strong></td>
                    <td>2</td>
                    <td>0</td>
                    <td>0</td>
                    <td>2</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>kill_steals</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>killing_spree</strong></td>
                    <td>0</td>
                    <td>4</td>
                    <td>4</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>multikill_2x</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>multikill_3x</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>multikill_4x</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>multikill_5x</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>multikill_6x</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>objectives_returned</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>objectives_stolen</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>repairs_constructions</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>revives_given</strong></td>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>self_kills</strong></td>
                    <td>3</td>
                    <td>3</td>
                    <td>0</td>
                    <td>3</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>tank_meatshield</strong></td>
                    <td>0.00</td>
                    <td>0.00</td>
                    <td>0</td>
                    <td>0.00</td>
                    <td>0.00</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>team_damage_given</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-mismatch">
                    <td><strong>team_damage_received</strong></td>
                    <td>0</td>
                    <td>53</td>
                    <td>53</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-error">‚ùå R1:True R2:False</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>team_gibs</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>team_kills</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-mismatch">
                    <td><strong>time_dead_minutes</strong></td>
                    <td>1.80</td>
                    <td>2.50</td>
                    <td>0.70</td>
                    <td>1.83</td>
                    <td>0.00</td>
                    <td><span class="status-error">‚ùå R1:True R2:False</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>time_dead_ratio</strong></td>
                    <td>35.10</td>
                    <td>24.50</td>
                    <td>0</td>
                    <td>35.10</td>
                    <td>0.00</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>time_played_minutes</strong></td>
                    <td>5.20</td>
                    <td>10.10</td>
                    <td>4.90</td>
                    <td>5.20</td>
                    <td>4.88</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>time_played_percent</strong></td>
                    <td>83.10</td>
                    <td>80.80</td>
                    <td>0</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>times_revived</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-missing">
                    <td><strong>useful_kills</strong></td>
                    <td>2</td>
                    <td>4</td>
                    <td>2</td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span style="color: #666;">N/A</span></td>
                    <td><span class="status-warning">‚ö†Ô∏è Not Stored</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>useless_kills</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
                <tr class="value-match">
                    <td><strong>xp</strong></td>
                    <td>44</td>
                    <td>34</td>
                    <td>0</td>
                    <td>44</td>
                    <td>0</td>
                    <td><span class="status-ok">‚úÖ Perfect</span></td>
                </tr>
        
            </tbody>
        </table>
    
        <div class="section-header">üìù Raw File Data</div>
        <div class="card">
            <h3>Round 1 Raw Line</h3>
            <div class="raw-data">7B84BE88\endekk\0\2\134219832 1 6 0 0 0 0 0 0 5 0 82 180 5 0 12 4 5 1 0 0 1 2 0 0 0 	1943	1426	0	0	1	3	0	0	83.1	44	0	0	2	0	2	0	0	0	0	0	193	0.0	5.2	0.0	35.1	1.8	1.2	2	55	0	0	0	0	0	0	0	0	1...</div>
        </div>
        <div class="card">
            <h3>Round 2 Raw Line</h3>
            <div class="raw-data">7B84BE88\endekk\1\1\134219836 3 5 1 0 0 1 6 0 1 0 27 68 2 5 5 115 253 7 2 18 4 8 1 1 0 1 3 0 0 0 	3309	2521	0	53	4	3	0	0	80.8	34	4	0	0	0	2	0	0	0	0	0	343	0.0	10.1	0.0	24.5	2.5	1.2	4	51	0	0	0	0	0	0	0	0	0...</div>
        </div>
    
        <script>
            // Damage comparison chart
            const damageCtx = document.getElementById('damageChart').getContext('2d');
            new Chart(damageCtx, {
                type: 'bar',
                data: {
                    labels: ['Damage Given', 'Damage Received'],
                    datasets: [{
                        label: 'R1 File',
                        data: [1943, 1426],
                        backgroundColor: 'rgba(79, 195, 247, 0.7)',
                        borderColor: 'rgba(79, 195, 247, 1)',
                        borderWidth: 2
                    }, {
                        label: 'R2 Differential (Calc)',
                        data: [1366, 1095],
                        backgroundColor: 'rgba(76, 175, 80, 0.7)',
                        borderColor: 'rgba(76, 175, 80, 1)',
                        borderWidth: 2
                    }, {
                        label: 'R2 Database',
                        data: [1366, 1095],
                        backgroundColor: 'rgba(255, 152, 0, 0.7)',
                        borderColor: 'rgba(255, 152, 0, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Damage Statistics: File vs Database',
                            color: '#4fc3f7',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#3a3a3a' }
                        },
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#3a3a3a' }
                        }
                    }
                }
            });
            
            // Time comparison chart
            const timeCtx = document.getElementById('timeChart').getContext('2d');
            new Chart(timeCtx, {
                type: 'line',
                data: {
                    labels: ['R1', 'R2 Cumulative', 'R2 Differential'],
                    datasets: [{
                        label: 'Time Played (minutes)',
                        data: [5.2, 10.1, 4.883333333333334],
                        borderColor: 'rgba(79, 195, 247, 1)',
                        backgroundColor: 'rgba(79, 195, 247, 0.2)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Time Played: Cumulative vs Differential',
                            color: '#4fc3f7',
                            font: { size: 16 }
                        },
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#3a3a3a' }
                        },
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#3a3a3a' }
                        }
                    }
                }
            });
        </script>
    </body>
</html>
    